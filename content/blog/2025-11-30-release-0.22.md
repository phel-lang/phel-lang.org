+++
title = "Release: v0.22 ‚Äì Metadata Conditions"
description = "Phel v0.22 deepens metadata support, adds new array helpers, introduces a debug namespace, and polishes the developer experience."
author = "The Phel Team"
+++

Just weeks after multi-arity functions landed, Phel v0.22 doubles down on ergonomics. Stronger metadata handling, fresh
array utilities, and the new `phel\\debug` toolbox make it easier than ever to inspect, test, and evolve your code. Along the
way, we tightened the public API surface and nudged code quality forward with a higher PHPStan bar.

## ‚ú® Highlights

- **Nested array helpers**: reach into deep structures with `php/aget-in`, `php/aset-in`, `php/aunset-in`, and `php/apush-in`.
- **Metadata `:pre`/`:post` conditions** now have a toggle for performance-sensitive workloads.
- **`*file*` global** exposes the current source path for macros, tooling, and documentation.
- **Set literal shorthand `#{...}`** and optional commas in hash maps add readability without ceremony.
- **`phel\\debug` namespace** introduces helpers like `spy` and `tap` for inline introspection.
- **Public API refinements** update `PhelFunction` with generated file paths, GitHub URLs, and structured metadata, while
deprecating older method calls.

## üêõ Bug fixes

- Ensured the REPL can `require` code from `repl.phel` and returns an empty string for `__FILE__` / `__DIR__`.
- Repaired metadata persistence on definitions, core functions, and macros.
- Fixed `argv` to provide a vector result and tightened `NsSymbol` namespace validation.

## üìà Code quality

- Raised PHPStan to level 5 and removed the legacy `phel\\trace` namespace in favor of `phel\\debug`.

## üë• Contributors

Huge thanks to **@Chemaclass**, **@jasalt**, and **@JesusValeraDev** for continuing to push the language forward.

## Dive deeper

For every detail, dig into the official documentation:

- [Full changelog for v0.22.0](https://github.com/phel-lang/phel-lang/compare/v0.21.0...v0.22.0)
- [Release on GitHub](https://github.com/phel-lang/phel-lang/releases/tag/v0.22.0)
